(this["webpackJsonpmern-hawkers"]=this["webpackJsonpmern-hawkers"]||[]).push([[0],{106:function(e,a,t){e.exports=t(214)},111:function(e,a,t){},214:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(41),l=t.n(s),o=(t(111),t(112),t(24)),i=t(35),c=t(20),m=t(21),u=t(23),d=t(22),h=t(25),p=t.n(h),g=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;Object(c.a)(this,t),n=a.call(this,e);return p.a.apps.length||p.a.initializeApp({apiKey:"AIzaSyADpZFjXCldn1JzDATAPhO8qYD2oVPPnFQ",authDomain:"hawkers-portal.firebaseapp.com",databaseURL:"https://hawkers-portal.firebaseio.com",storageBucket:"hawkers-portal.appspot.com"}),n}return Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark navbar-expand-lg"},r.a.createElement(o.b,{to:"/",className:"navbar-brand"},"Hawkers.SG"),r.a.createElement("div",{className:"collpase navbar-collapse"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"navbar-item"},r.a.createElement(o.b,{to:"./",className:"nav-link"},"Browse memories")),r.a.createElement("li",{className:"navbar-item"},r.a.createElement(o.b,{to:"./add-hawker",className:"nav-link"},"Create memories")),r.a.createElement("li",{className:"navbar-item"},r.a.createElement(o.b,{to:"./firebase-uploader",className:"nav-link"},r.a.createElement("b",null,"Single "),"Firebase Uploader")),r.a.createElement("li",{className:"navbar-item"},r.a.createElement(o.b,{to:"./firebase-uploader-multiple",className:"nav-link"},r.a.createElement("b",null,"Multiple "),"Firebase Uploader")))))}}]),t}(n.Component),b=t(18),f=t(47),v=t(99),E=t(38),U=t.n(E),k=t(100),w=function(e){return r.a.createElement(f.a,null,r.a.createElement(f.a.Img,{variant:"top",src:e.exercise.image[0]}),r.a.createElement(f.a.Body,null,r.a.createElement(f.a.Title,null,e.exercise.name),r.a.createElement(f.a.Text,null,e.exercise.description),r.a.createElement(o.b,{to:"/hawkers/"+e.exercise._id},r.a.createElement(v.a,{variant:"primary",size:"lg",block:!0},"View"))))},j=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).deleteExercise=n.deleteExercise.bind(Object(b.a)(n)),n.state={exercises:[]},n}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("http://localhost:5000"),U.a.get("http://localhost:5000/hawkers").then((function(a){e.setState({exercises:a.data})})).catch((function(e){console.log(e)}))}},{key:"deleteExercise",value:function(e){U.a.delete("http://localhost:5000/exercises/"+e).then((function(e){console.log(e.data)})),this.setState({exercises:this.state.exercises.filter((function(a){return a._id!==e}))})}},{key:"exerciseList",value:function(){var e=this;return this.state.exercises.map((function(a){return r.a.createElement(w,{exercise:a,deleteExercise:e.deleteExercise,key:a._id})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Browse all events"),r.a.createElement(k.a,null,this.exerciseList()))}}]),t}(n.Component),O=(t(89),t(101)),S=t(75),C=t(42),y=t.n(C),x=(t(151),function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).state={name:"",description:"",telephone:"",title_image:"",address:"",date:new Date,image:[]},n}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;U.a.get("http://localhost:5000/hawkers/"+this.props.match.params.id).then((function(a){e.setState({name:a.data.name,description:a.data.description,duration:a.data.duration,date:new Date(a.data.date),title_image:a.data.title_image,image:a.data.image,address:a.data.address})})).catch((function(e){console.log(e)})),console.log(this.state.image)}},{key:"render",value:function(){var e=this.state.image.map((function(e,a){return{original:e,thumbnail:e}}));return r.a.createElement("div",null,r.a.createElement(O.a,{debug:!0},r.a.createElement(S.a,{md:7,debug:!0},r.a.createElement(y.a,{items:e}),";"),r.a.createElement(S.a,{md:4,debug:!0}," ",r.a.createElement("h1",null,this.state.name),r.a.createElement("h5",null,this.state.description),r.a.createElement("br",null),r.a.createElement("h5",null,"Address: ",this.state.address))))}}]),t}(n.Component)),N=t(46),D=t.n(N),P=t(34),L=t(53),R=t(102),A=t.n(R),T=t(43),I=t.n(T),F=t(105),_=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).handleUploadSuccess=function(){var e=Object(L.a)(D.a.mark((function e(a){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.storage().ref("images").child(a).getDownloadURL();case 2:t=e.sent,n.setState((function(e){return{filenames:[].concat(Object(P.a)(e.filenames),[a]),downloadURLs:[].concat(Object(P.a)(e.downloadURLs),[t]),uploadProgress:100,isUploading:!1,image:[].concat(Object(P.a)(e.downloadURLs),[t]),images:[].concat(Object(P.a)(e.images),[{original:t,thumbnail:t}]),success:!0}})),console.log(n.state);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.onChangeName=n.onChangeName.bind(Object(b.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(b.a)(n)),n.onChangeTelephone=n.onChangeTelephone.bind(Object(b.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(b.a)(n)),n.onChangeTitleImage=n.onChangeTitleImage.bind(Object(b.a)(n)),n.onChangeImage=n.onChangeImage.bind(Object(b.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(b.a)(n)),n.onSubmit=n.onSubmit.bind(Object(b.a)(n)),n.state={name:"",description:"",telephone:"",address:"",date:new Date,images:[],image:[],filenames:[],downloadURLs:[],isUploading:!1,uploadProgress:0,success:!1},console.log(n.state),n}return Object(m.a)(t,[{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeTelephone",value:function(e){this.setState({telephone:e.target.value})}},{key:"onChangeTitleImage",value:function(e){this.setState({title_image:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"onChangeImage",value:function(e){console.log("on change image called"),this.setState({image:e.target.value}),this.state.images=this.state.image.map((function(e,a){return{original:e,thumbnail:e}}))}},{key:"onChangeDate",value:function(e){this.setState({date:e})}},{key:"onSubmit",value:function(e){e.preventDefault();var a={name:this.state.name,description:this.state.description,date:this.state.date,title_image:this.state.title_image,image:this.state.image,address:this.state.address,telephone:this.state.telephone};console.log(a),U.a.post("http://localhost:5000/hawkers",a).then((function(e){return console.log(e.data)})),window.location="/"}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Add a hawker store here!"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name: "),r.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.name,onChange:this.onChangeName})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Description: "),r.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Telephone: "),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.telephone,onChange:this.onChangeTelephone})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Address: "),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.address,onChange:this.onChangeAddress})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Date started: "),r.a.createElement("div",null,r.a.createElement(A.a,{selected:this.state.date,onChange:this.onChangeDate}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Title Image: "),r.a.createElement(I.a,{accept:"image/*",name:"image-uploader-multiple",randomizeFilename:!0,storageRef:p.a.storage().ref("images"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleUploadSuccess,onProgress:this.handleProgress,multiple:!0}),r.a.createElement("p",null,"Progress: ",this.state.uploadProgress),r.a.createElement("p",null,"Filenames: ",this.state.filenames.join(", ")),this.state.success&&r.a.createElement(F.a,{variant:"success"},"Image successfully uploaded."),r.a.createElement(y.a,{items:this.state.images,bulletOnClick:console.log("test")})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Create Exercise Log",className:"btn btn-primary"}))))}}]),t}(r.a.Component),z=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={avatar:"",isUploading:!1,progress:0,avatarURL:""},e.handleUploadSuccess=function(a){e.setState({avatar:a,progress:100,isUploading:!1}),p.a.storage().ref("images").child(a).getDownloadURL().then((function(a){return e.setState({url:a}),e.setState({avatarURL:a})})),console.log(e.state)},e}return Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",null,"Avatar:"),this.state.isUploading&&r.a.createElement("p",null,"Progress: ",this.state.progress),r.a.createElement(I.a,{accept:"image/*",name:"avatar",randomizeFilename:!0,storageRef:p.a.storage().ref("images"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleUploadSuccess,onProgress:this.handleProgress}),this.state.avatarURL&&r.a.createElement("img",{src:this.state.avatarURL})))}}]),t}(n.Component),B=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={filenames:[],downloadURLs:[],isUploading:!1,uploadProgress:0,images:[]},e.handleUploadStart=function(){return e.setState({isUploading:!0,uploadProgress:0})},e.handleProgress=function(a){return e.setState({uploadProgress:a})},e.handleUploadError=function(a){e.setState({isUploading:!1}),console.error(a)},e.handleUploadSuccess=function(){var a=Object(L.a)(D.a.mark((function a(t){var n;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.storage().ref("images").child(t).getDownloadURL();case 2:n=a.sent,e.setState((function(e){return{filenames:[].concat(Object(P.a)(e.filenames),[t]),downloadURLs:[].concat(Object(P.a)(e.downloadURLs),[n]),images:[].concat(Object(P.a)(e.images),[{original:n,thumbnail:n}]),uploadProgress:100,isUploading:!1}})),console.log(e.state);case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,{accept:"image/*",name:"image-uploader-multiple",randomizeFilename:!0,storageRef:p.a.storage().ref("images"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleUploadSuccess,onProgress:this.handleProgress,multiple:!0}),r.a.createElement("p",null,"Progress: ",this.state.uploadProgress),r.a.createElement("p",null,"Filenames: ",this.state.filenames.join(", ")),r.a.createElement(y.a,{items:this.state.images}))}}]),t}(n.Component);var M=function(){return r.a.createElement(o.a,{basename:"memories"},r.a.createElement(g,null),r.a.createElement(i.a,{path:"./",exact:!0,component:j}),r.a.createElement(i.a,{path:"./hawkers/:id",component:x}),r.a.createElement(i.a,{path:"./add-hawker",exact:!0,component:_}),r.a.createElement(i.a,{path:"./firebase-uploader",exact:!0,component:z}),r.a.createElement(i.a,{path:"./firebase-uploader-multiple",exact:!0,component:B}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[106,1,2]]]);
//# sourceMappingURL=main.2e901bdc.chunk.js.map